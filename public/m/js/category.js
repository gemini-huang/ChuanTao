/*?????????*/
mui('.lt_cateLeft').scroll({
    indicators:false
});
/*?????????*/
var scrollRight = mui('.cate_right').scroll({
    indicators:false
});

/*
 - ??????
 + ??????  ????????????????? ???????›Ì??
 + ?????????????   ??????????????????????  ???????????????????
 + ??????????????  ???????????????????   ???????????????????
 * */
$(function () {
    /*???*/
    getFirstCategoryData(function (data) {
        /*??????????? data*/
        /*??????????*/
        $('.lt_cateLeft').find('ul').html(template('firstCategory',data));
        /*?????????????????????*/
        /*?????????????id????????????*/
        getSecondCategoryData({
            id:data.rows[0].id /*?????????????id*/
        },function(data){
            /*???????????*/
            $('.cate_right').find('ul').html(template('secondCategory',data));
        })
    });
    /*????*/
    $('.lt_cateLeft').on('tap','ul li',function(){
        /*???????*/
        $('.lt_cateLeft').find('li').removeClass('now');
        $(this).addClass('now');
        /*???id?????????????????*/
        /*???????????id*/
        getSecondCategoryData({
            id:$(this).data('id') /*?????????????id*/
        },function(data){
            /*???????????*/
            $('.cate_right').find('ul').html(template('secondCategory',data));
            /*???¦·???0??¦Ë??  ????*/
            scrollRight.scrollTo(0,0,100);
        })
    });
});
/*??????????????*/
var getFirstCategoryData = function (callback) {
    $.ajax({
        type: 'get',
        url: '/category/queryTopCategory',
        data: {},
        dataType: 'json',
        success: function (data) {
            /*?????????????????*/
            callback && callback(data);
        }
    })
}
/*????????????????*/
var getSecondCategoryData = function(params,callback){
    $.ajax({
        type: 'get',
        url: '/category/querySecondCategory',
        data: params,
        dataType: 'json',
        success: function (data) {
            /*?????????????????*/
            callback && callback(data);
        }
    });
}
